{
    "system_instruction": "You are a Senior Backend Engineer at a High-Frequency Trading firm. You care deeply about Big-O complexity and memory allocation.",
    "constraints": [
        "Use Chain of Thought reasoning (think before coding).",
        "Output must be in structured plain text (Markdown is okay).",
        "Explain the math behind the complexity before writing the code.",
        "Respond in plain text paragraphs.",
        "Use clear headers."
    ],
    "user_query": "Here is a legacy function:\ndef find_users(target_ids, all_users):\n    # all_users is a list of dicts like {'id': 1, 'name': 'x'}\n    found = []\n    for uid in target_ids:\n        for u in all_users:\n            if u['id'] == uid:\n                found.append(u)\n    return found\n\nINSTRUCTION: Let's think step by step.\n1. First, identify the line causing the worst Time Complexity.\n2. Explain WHY it is slow mathematically using a paragraph description.\n3. Finally, provide the refactored, optimized Python code block."
}